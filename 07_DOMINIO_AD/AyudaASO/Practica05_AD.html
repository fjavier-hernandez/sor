
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/fjavier-hernandez/sor/07_DOMINIO_AD/AyudaASO/Practica05_AD.html">
      
      
      
      
      <link rel="icon" href="../../imagenes/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>Práctica05_AD - Sistemas Operativos en Red</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-0CPJP88MBF"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-0CPJP88MBF",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-0CPJP88MBF",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="javi" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica05_ad" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../../index.html" title="Sistemas Operativos en Red" class="md-header__button md-logo" aria-label="Sistemas Operativos en Red" data-md-component="logo">
      
  <img src="../../imagenes/SOR_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sistemas Operativos en Red
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica05_AD
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="javi" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Cambiar a modo noche"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Cambiar a modo día"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo día" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Sistemas Operativos en Red" class="md-nav__button md-logo" aria-label="Sistemas Operativos en Red" data-md-component="logo">
      
  <img src="../../imagenes/SOR_logo.png" alt="logo">

    </a>
    Sistemas Operativos en Red
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SituacionAprendizaje.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Situación de Aprendizaje
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Evaluacion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1.- Instalación de Sistemas Operativos en red.
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            1.- Instalación de Sistemas Operativos en red.
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01_INTRO_SOR/001_IntroSOR.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1- Introducción a Sistemas Operativos en Red
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01_INTRO_SOR/002_Virtualizaci%C3%B3n.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2- Virtualización
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01_INTRO_SOR/006_Instalacion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3- Instalación de Sistemas Operativos en Red
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01_INTRO_SOR/007_Practica.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.4- Actividades
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2.- Introducción a Servicio de directorio y Samba.
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            2.- Introducción a Servicio de directorio y Samba.
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02_INTRO_SAMBA/020_Introduccion_SD.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1- Introducción Servicio de directorio.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02_INTRO_SAMBA/021_IntroSamba.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.2- Introducción Samba
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02_INTRO_SAMBA/022_InstalacionSamba.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3- Instalación y configuración inicial Samba
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02_INTRO_SAMBA/025_Actividades.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.4- Actividades
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    3.- Gestión Usuarios y grupos Samba
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            3.- Gestión Usuarios y grupos Samba
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03_USERS_SAMBA/031_SambaSecUsers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1- Secciones y Usuarios Samba
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03_USERS_SAMBA/032_CreacionUsersSamba.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2- Creación de Usuarios y grupos en Samba
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03_USERS_SAMBA/035_Actividades.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.3- Actividades
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="practica05_ad">Práctica05_AD<a class="headerlink" href="#practica05_ad" title="Permanent link">&para;</a></h1>
<h1 id="instalacion-de-active-directoryinstalacion-de-active-directory-ii">Instalación de Active DirectoryInstalación de Active Directory II<a class="headerlink" href="#instalacion-de-active-directoryinstalacion-de-active-directory-ii" title="Permanent link">&para;</a></h1>
<p>Objetivos de esta práctica:</p>
<ul>
<li>Eliminar Clientes de un dominio.</li>
<li>Degradar Controlador de un dominio.</li>
<li>Configurar un servicio de DHCP</li>
<li>Acceso Remoto y NAT</li>
</ul>
<h1 id="eliminar-clientes-de-un-dominio">Eliminar clientes de un dominio<a class="headerlink" href="#eliminar-clientes-de-un-dominio" title="Permanent link">&para;</a></h1>
<p>Habrá veces que una determinada máquina queramos sacarla de un dominio por algún motivo, para <strong>quitar un cliente Windows
10</strong> de un domino debemos realizar los siguientes pasos:</p>
<p>Accedemos a Sistema, a través del botón de <strong>inicio de Windows</strong> y con el ratón botón de la <strong>derecha</strong> --&gt; <strong>Sistema</strong>.</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/001.png" width="900"/>
  <figcaption>Eliminar cliente windows 10 de dominio I.</figcaption>
</figure>

<p>Dentro de <strong>Sistema</strong> --&gt; Seleccionamos <strong>Administrar o desconectar del trabajo o de la escuela</strong>:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/002.png" width="900"/>
  <figcaption>Eliminar cliente windows 10 de dominio II.</figcaption>
</figure>

<p>Seleccionamos el dominio al que está conectado, en nuestro caso a <strong>ASO2223.LOCAL</strong> y hacemos clic en Desconectar</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/003.png" width="900"/>
  <figcaption>Eliminar cliente windows 10 de dominio III.</figcaption>
</figure>

<figure>
  <img src="./imagenes/02/PracticasAD/PR05/004.png" width="900"/>
  <figcaption>Eliminar cliente windows 10 de dominio IV.</figcaption>
</figure>

<p>Confirmamos la desconexión del dominio local</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/005.png" width="900"/>
  <figcaption>Eliminar cliente windows 10 de dominio V.</figcaption>
</figure>

<h1 id="degradar-un-controlador-de-dominio">Degradar un controlador de dominio<a class="headerlink" href="#degradar-un-controlador-de-dominio" title="Permanent link">&para;</a></h1>
<p>En este apartado lo que vamos a ver es cómo podemos <strong>degradar un servidor que esté actuando como controlador de dominio</strong>,
es decir, que tenga instalado un Active Directory. Para ello iremos al Panel de Administrador del Servidor y seleccionaremos
Agregar roles y características:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/006.png" width="900"/>
  <figcaption>Degradar un controlador de dominio I.</figcaption>
</figure>

<p>Nos aparece el asistente para quitar roles y características, seleccionamos siguiente:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/007.png" width="900"/>
  <figcaption>Degradar un controlador de dominio II.</figcaption>
</figure>

<p>Iniciado el asistente seleccionamos el servidor en donde vamos a quitar algún rol. En nuestro caso, eliminaremos el rol
Servicios de dominio de Active Directory:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/008.png" width="900"/>
  <figcaption>Degradar un controlador de dominio III.</figcaption>
</figure>

<p>Eliminamos las características de los servicios de Active Directory:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/009.png" width="900"/>
  <figcaption>Degradar un controlador de dominio IV.</figcaption>
</figure>

<p>Para poder eliminar los servicios de Active Directory, es necesario disminuir el nivel del controlador de dominio:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/010.png" width="900"/>
  <figcaption>Degradar un controlador de dominio V.</figcaption>
</figure>

<p>Forzamos la eliminación del controlador de dominio:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/011.png" width="900"/>
  <figcaption>Degradar un controlador de dominio VI.</figcaption>
</figure>
<p>Introducimos la contraseña del administrador del dominio, en nuestro caso "cefire2017.":</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/012.png" width="900"/>
  <figcaption>Degradar un controlador de dominio VII.</figcaption>
</figure>

<p>Y por último Disminuimos el nivel:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/013.png" width="900"/>
  <figcaption>Degradar un controlador de dominio VIII.</figcaption>
</figure>

<h2 id="servicio-de-dhcp">Servicio de DHCP<a class="headerlink" href="#servicio-de-dhcp" title="Permanent link">&para;</a></h2>
<p>Indiscutiblemente uno de los principales roles que nos ofrece Windows Server y que son vitales en el óptimo funcionamiento
de nuestra infraestructura de red es el rol de DHCP. DHCP (Dynamic Host Configuration Protocol – Protocolo de Configuración
Dinámica de Equipos) nos permite definir rangos de direcciones IP para los equipos cliente del dominio y de este modo
administrar de forma centralizada todas las direcciones IP del dominio.</p>
<p>Cuando en nuestra organización tenemos disponible un <strong>servidor DHCP</strong> tenemos la plena confianza que todos los equipos y
dispositivos de nuestra red tendrán de forma automática su dirección IP y no es necesario ir a cada máquina a definir la
dirección de forma manual.</p>
<p>Con el rol DHCP proveemos los <strong>siguientes parámetros</strong>:</p>
<ul>
<li>Máscara de subred</li>
<li>Dirección IP</li>
<li>Puerta de enlace</li>
<li>Servidores DNS, entre otros.</li>
</ul>
<p>Para iniciar el proceso de instalación seleccionaremos la opción Agregar roles y características desde el Administrador del
servidor. La primera ventana la podemos omitir ya que es de bienvenida. Pulsamos Siguiente y en la ventana desplegada
seleccionamos la opción Instalación basada en características y roles, pulsamos Siguiente y seleccionamos el servidor donde
instalaremos el rol DHCP.</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/014.png" width="900"/>
  <figcaption>Instalación servicio de DHCP I.</figcaption>
</figure>

<p>Una vez seleccionado el equipo buscaremos el rol Servidor de DHCP, al activar la casilla veremos la siguiente ventana donde
se indica si deseamos agregar las características de DHCP. </p>
<p>Seleccionamos la opción <strong>Agregar característica</strong> y veremos el rol seleccionado. Llegaremos al resumen y haremos clic en <strong>Instalar</strong>:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/015.png" width="900"/>
  <figcaption>Instalación servicio de DHCP II.</figcaption>
</figure>

<p>Una vez instalado, hay que realizar la configuración del rol. Para ello hay que hacer clic en Completar configuración DHCP:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/016.png" width="900"/>
  <figcaption>Instalación servicio de DHCP III.</figcaption>
</figure>

<h2 id="configuracion-servicio-de-dhcp">Configuración servicio de DHCP<a class="headerlink" href="#configuracion-servicio-de-dhcp" title="Permanent link">&para;</a></h2>
<p>Como vemos debemos completar la configuración del DHCP para que todo el rol quede correctamente preparado para la
organización, para ello pulsamos en la opción “Completar configuración de DHCP”. Al pulsar esta opción veremos el siguiente
asistente.</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/017.png" width="900"/>
  <figcaption>Configuración servicio de DHCP I.</figcaption>
</figure>

<p>Pulsamos Siguiente y debemos configurar las credenciales del usuario que han de ser usadas para la configuración del
servidor DHCP:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/018.png" width="900"/>
  <figcaption>Configuración servicio de DHCP II.</figcaption>
</figure>

<p>Una vez definidas pulsamos Confirmar y veremos el resumen del proceso. Pulsamos Cerrar para salir del asistente. Con esto
hemos instalado el rol de DHCP en Windows Server 2019:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/019.png" width="900"/>
  <figcaption>Configuración servicio de DHCP III.</figcaption>
</figure>

<p>Ahora debemos configurar el DHCP por lo que con este paso realizado vamos a ir a la siguiente ruta para establecer la
configuración deseada para el DHCP. Para ello vamos al Panel del <strong>Administrador</strong> --&gt; <strong>Herramientas y DHCP</strong>:</p>
<p>Como podemos observar contamos con dos opciones de configuración. Allí podemos configurar todos los parámetros del
direccionamiento IPv4, hasta ahora el más usado y el de IPv6.</p>
<h2 id="creacion-de-un-nuevo-ambito">Creación de un nuevo ámbito<a class="headerlink" href="#creacion-de-un-nuevo-ambito" title="Permanent link">&para;</a></h2>
<p>Un ámbito es un rango de direcciones que serán asignadas de forma automática a los equipos de nuestro dominio. Por tanto
seleccionaremos IPv4 y con el botón de la derecha del ratón accederemos a la opción Ámbito Nuevo...</p>
<p>Iniciará el asistente para creación de un ámbito nuevo:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/020.png" width="900"/>
  <figcaption>Configuración servicio de DHCP IV.</figcaption>
</figure>

<figure>
  <img src="./imagenes/02/PracticasAD/PR05/021.png" width="900"/>
  <figcaption>Configuración servicio de DHCP V.</figcaption>
</figure>

<p>Pulsamos Siguiente y a continuación debemos establecer un nombre a este nuevo ámbito. En nuestro caso, ámbito
ASO2223.LOCAL:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/022.png" width="900"/>
  <figcaption>Configuración servicio de DHCP VI.</figcaption>
</figure>

<p>En la siguiente ventana debemos establecer el rango de direcciones IP a asignar de forma automática, debemos indicar una
dirección IP inicial y una dirección IP final. Es muy importante que tengamos claridad sobre la cantidad de usuarios estarán
activos para no asignar direcciones de más ni quedarnos cortos con las mismas. La longitud la dejamos por defecto en 24 y la
máscara de subred dejamos la que está, clase C. En nuestro caso, introduciremos un rango desde la 192.168.100.20 -
192.168.100.250.</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/023.png" width="900"/>
  <figcaption>Configuración servicio de DHCP VII.</figcaption>
</figure>

<p>Al pulsar Siguiente podemos establecer una o más direcciones IP que no serán distribuidas a los usuarios de manera normal,
esto es efectivo en los siguientes casos:</p>
<ul>
<li>Tareas de administración.</li>
<li>Asignar IPs fijas a dispositivos como impresoras.</li>
<li>Establecer direcciones IP a un grupo determinado de usuarios sin que ésta sea renovada.</li>
</ul>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/024.png" width="900"/>
  <figcaption>Configuración servicio de DHCP VIII.</figcaption>
</figure>

<p>Una vez establecido o no estas exclusiones pulsamos Siguiente y veremos que podemos configurar cuánto tiempo durará la
concesión de la dirección IP, esto hace que la dirección IP en el equipo cliente sea renovada de manera automática, podemos
definir este valor en días, horas o minutos. Lo más recomendable es que para los equipos de nuestra organización se
establezca esta concesión en días ya que al renovarse la dirección IP el usuario puede verse afectado en su navegación y uso
de la red.</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/025.png" width="900"/>
  <figcaption>Configuración servicio de DHCP IX.</figcaption>
</figure>

<p>Pulsamos Siguiente y debemos definir si establecemos esta configuración de manera inmediata o más adelante. En nuestro
caso marcaremos la opción de configurar las opciones ahora:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/026.png" width="900"/>
  <figcaption>Configuración servicio de DHCP X.</figcaption>
</figure>

<p>Al pulsar que las configure de manera inmediata el asistente nos solicitará que ingresemos la dirección IP del enrutador o
puerta de enlace. En nuestro caso añadiremos la ip 192.168.100.1 y le daremos a Agregar:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/027.png" width="900"/>
  <figcaption>Configuración servicio de DHCP XI.</figcaption>
</figure>

<p>Pulsamos nuevamente Siguiente y podemos ver el nombre del dominio o especificar cuáles equipos serán usados para la
resolución de los nombres DNS. En nuestro caso, la IP de la red interna, 192.168.100.1 y como alternativo podemos poder
cualquier DNS, por ejemplo el de google 8.8.8.8:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/028.png" width="900"/>
  <figcaption>Configuración servicio de DHCP XII.</figcaption>
</figure>

<p>Al pulsar Siguiente veremos la configuración de los servidores WINS los cuales permiten que los nombres de equipo NetBIOS
sean convertidos en direcciones IP. Nuestro caso ninguno.</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/029.png" width="900"/>
  <figcaption>Configuración servicio de DHCP XIII.</figcaption>
</figure>

<p>Finalmente activamos nuestro ámbito.</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/030.png" width="900"/>
  <figcaption>Configuración servicio de DHCP XIV.</figcaption>
</figure>

<h3 id="configuracion-de-ip-por-dhcp-en-maquina-cliente">Configuración de IP por DHCP en máquina cliente<a class="headerlink" href="#configuracion-de-ip-por-dhcp-en-maquina-cliente" title="Permanent link">&para;</a></h3>
<p>Para comprobar que nuestro DHCP funciona, basta con cambiar la configuración en la máquina Windows 10 cliente y
comprobar que nos asigna la primera dirección disponible de nuestro ámbito, típicamente la 192.168.100.20, en nuestro caso:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/031.png" width="900"/>
  <figcaption>Configuración IP dinámica en cliente.</figcaption>
</figure>

<p>Y comprobamos la IP:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/032.png" width="900"/>
  <figcaption>Comprobación de asignación de IP dinámica.</figcaption>
</figure>

<h3 id="concesion-de-direcciones-en-dhcp">Concesión de direcciones en DHCP<a class="headerlink" href="#concesion-de-direcciones-en-dhcp" title="Permanent link">&para;</a></h3>
<p>Desde el servidor, en la opción de DHCP, también podemos comprobar las concesiones de direcciones IPs que se han
realizado:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/033.png" width="900"/>
  <figcaption>Comprobación de las concesiones de direcciones IPs.</figcaption>
</figure>

<h2 id="acceso-remoto-nat">Acceso Remoto. NAT.<a class="headerlink" href="#acceso-remoto-nat" title="Permanent link">&para;</a></h2>
<h3 id="servicios-de-enrutamiento">Servicios de enrutamiento<a class="headerlink" href="#servicios-de-enrutamiento" title="Permanent link">&para;</a></h3>
<p>En este punto vamos a realizar la configuración de NAT en nuestro servidor. NAT (Network Address Translation) nos permite
que nuestra interfaz externa, pueda traducir las direcciones de la red interna. De esta forma, en las máquinas clientes de la red
interna de nuestro dominio, puede tener acceso a internet. Este servicio en combinación con el anterior se suele utilizar con
mucha frecuencia. </p>
<p>Para ello lo primero de debemos hacer es realizar <strong>la instalación del rol Acceso Remoto</strong>, desde: <strong>el Panel del Administrador del Servidor en agregar roles y características y seleccionar Acceso Remoto</strong>:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/034.png" width="900"/>
  <figcaption>Configuración de NAT I.</figcaption>
</figure>

<p>Marcamos y agregamos las características, NAT va acompañado también del servicio de Enrutamiento y Direct Access. En
nuestro caso, de momento solo realizaremos la configuración de NAT:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/035.png" width="900"/>
  <figcaption>Configuración de NAT II.</figcaption>
</figure>

<figure>
  <img src="./imagenes/02/PracticasAD/PR05/036.png" width="900"/>
  <figcaption>Configuración de NAT III.</figcaption>
</figure>

<p>Una vez instalado vamos a realizar la configuración del NAT. Para ello, dentro del Panel del Administrador del Servidor,
accedemos a Herramientas y después en Enrutamiento y Acceso Remoto:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/037.png" width="900"/>
  <figcaption>Configuración de NAT IV.</figcaption>
</figure>

<p>Dentro de enrutamiento y acceso remoto, seleccionamos nuestro servidor y con el botón de la derecha del ratón, marcamos la
opción Configurar y habilitar el Enrutamiento y acceso remoto:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/038.png" width="900"/>
  <figcaption>Configuración de NAT V.</figcaption>
</figure>

<p>Nos iniciará un asistente y marcaremos la opción Traducción de direcciones de red (NAT):</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/039.png" width="900"/>
  <figcaption>Configuración de NAT VI.</figcaption>
</figure>

<p>Marcaremos nuestra interfaz externa (WAN) como interfaz de conexión a internet:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/040.png" width="900"/>
  <figcaption>Configuración de NAT VII.</figcaption>
</figure>

<h2 id="acceso-a-internet-cliente-windows-10">Acceso a internet cliente Windows 10<a class="headerlink" href="#acceso-a-internet-cliente-windows-10" title="Permanent link">&para;</a></h2>
<p>Ahora desde nuestra máquina cliente Windows 10, ya tenemos nuestro acceso a internet:</p>
<figure>
  <img src="./imagenes/02/PracticasAD/PR05/041.png" width="900"/>
  <figcaption>Configuración de NAT VIII.</figcaption>
</figure>

<!-- # Actividades

En esta actividad vamos a realizar la configuración de un servicio DHCP y el acceso remoto. NAT.

1. **Creación de DHCP**: 

- En este apartado habrá que instalar y configurar el servicio DHCP. Habrá que entregar un único archivo PDF con la captura de pantalla de nuestra **Panel de Administrador del Servidor, con las concesiones DHCP**, donde aparezca claramente el nombre de máquina; además otra captura con **la configuración de red del Windows 10**.

2. **Validar una máquina Windows 10 en el dominio**:

- Configuración del NAT. se mostrará **Panel de Administrador del Servidor, con la configuración NAT**, donde aparezca claramente el nombre de máquina; además otra captura con demostrando que el cliente tiene conexión a Internet. -->









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2023-2024 Francisco Javier Hernández Illán - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:<fj.hernandez@edu.gva.es>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48H48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0L0 176z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/fjavier-hernandez-illan" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  




  


<h4>Consentimiento de cookie</h4>
<p>Esta página de apuntes utiliza cookies para reconocer las visitas, medir la efectividad de la documentación y averiguar si encuentras aquello que buscas o cómo has llegado a estos apuntes. Con tu consentimiento, me ayudas a mejorar estos materiales.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Aceptar</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Gestionar cookies</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "toc.integrate", "navigation.indexes", "navigation.top", "navigation.tracking", "toc.follow", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>