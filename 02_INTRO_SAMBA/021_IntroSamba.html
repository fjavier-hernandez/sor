
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Introducción del servicio Samba por Francisco Javier Hernández Illán. Explicación inicial de Samba. Descripción de la configuración de partida en ubuntu server.">
      
      
      
        <link rel="canonical" href="https://github.com/fjavier-hernandez/sor/02_INTRO_SAMBA/021_IntroSamba.html">
      
      
        <link rel="prev" href="020_Introduccion_SD.html">
      
      
        <link rel="next" href="022_InstalacionSamba.html">
      
      
      <link rel="icon" href="../imagenes/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>Introducción Samba - Sistemas Operativos en Red</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-0CPJP88MBF"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-0CPJP88MBF",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-0CPJP88MBF",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="javi" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduccion" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../index.html" title="Sistemas Operativos en Red" class="md-header__button md-logo" aria-label="Sistemas Operativos en Red" data-md-component="logo">
      
  <img src="../imagenes/SOR_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sistemas Operativos en Red
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Introducción Samba
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="javi" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Cambiar a modo noche"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Cambiar a modo día"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo día" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Sistemas Operativos en Red" class="md-nav__button md-logo" aria-label="Sistemas Operativos en Red" data-md-component="logo">
      
  <img src="../imagenes/SOR_logo.png" alt="logo">

    </a>
    Sistemas Operativos en Red
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../SituacionAprendizaje.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Situación de Aprendizaje
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Evaluacion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluación
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1.- Instalación de Sistemas Operativos en red.
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            1.- Instalación de Sistemas Operativos en red.
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_INTRO_SOR/001_IntroSOR.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1- Introducción a Sistemas Operativos en Red
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_INTRO_SOR/002_Virtualizaci%C3%B3n.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2- Virtualización
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_INTRO_SOR/006_Instalacion.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3- Instalación de Sistemas Operativos en Red
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_INTRO_SOR/007_Practica.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.4- Actividades
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2.- Introducción a Servicio de directorio y Samba.
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            2.- Introducción a Servicio de directorio y Samba.
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="020_Introduccion_SD.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1- Introducción Servicio de directorio.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    2.2- Introducción Samba
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="021_IntroSamba.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    2.2- Introducción Samba
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#caracteristicas" class="md-nav__link">
    <span class="md-ellipsis">
      Características
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduccion-a-la-configuracion-del-servicio-samba-en-ubuntu" class="md-nav__link">
    <span class="md-ellipsis">
      Introducción a la configuración del servicio SAMBA en Ubuntu
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introducción a la configuración del servicio SAMBA en Ubuntu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-directorio-compartido" class="md-nav__link">
    <span class="md-ellipsis">
      Creación Directorio Compartido
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integracion-de-permisos" class="md-nav__link">
    <span class="md-ellipsis">
      Integración de permisos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integración de permisos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#permisos-unix" class="md-nav__link">
    <span class="md-ellipsis">
      Permisos Unix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permisos-windows" class="md-nav__link">
    <span class="md-ellipsis">
      Permisos Windows
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permisos-samba" class="md-nav__link">
    <span class="md-ellipsis">
      Permisos Samba
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencia" class="md-nav__link">
    <span class="md-ellipsis">
      Referencia
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="022_InstalacionSamba.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3- Instalación y configuración inicial Samba
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="025_Actividades.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.4- Actividades
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<figure>
    <img src="imagenes/001.png"/>
</figure>
<figure>
    <img src="imagenes/002.png"/>
</figure>

<h1 id="introduccion">Introducción<a class="headerlink" href="#introduccion" title="Permanent link">&para;</a></h1>
<div class="admonition tip">
<p class="admonition-title"><strong>Conocimiento previo</strong></p>
<ul>
<li><strong>SMB (Server Message Block)</strong> protocolo de red que <strong>permite compartir archivos, impresoras, etcétera,</strong> entre nodos de una red de computadoras que usan el <strong>sistema operativo Microsoft Windows</strong>. </li>
<li>Este protocolo pertenece a la <strong>capa de aplicación</strong> en el modelo TCP/IP y fue renombrado posteriormente a <strong>CIFS (Common Internet File System)</strong>.</li>
</ul>
</div>
<p><strong>Samba</strong> es una implementación libre del protocolo <strong>SMB</strong> para sistemas de tipo UNIX, para el cual se destaca:</p>
<ul>
<li>Se basa en un conjunto de aplicaciones de <strong>GNU/Linux</strong> cuyo principal objetivo es conectar computadoras con diferentes sistemas operativos como pueden ser <strong>GNU/Linux, Mac OS X o Unix</strong> para actuar como <strong>servidores o clientes</strong> de los diferentes servicios de compartición de recursos.</li>
<li>También permite validar usuarios haciendo de <strong>Controlador Principal de Dominio (PDC)</strong>, como miembro de dominio e incluso como un dominio <strong>Active Directory</strong> para redes basadas en Windows; aparte de ser capaz de servir colas de impresión, directorios compartidos y autentificar con su propio archivo de usuarios.</li>
</ul>
<h2 id="caracteristicas">Características<a class="headerlink" href="#caracteristicas" title="Permanent link">&para;</a></h2>
<p>Entre los sistemas tipo <strong>Unix</strong> en los que se puede ejecutar <strong>Samba</strong>, están las distribuciones:</p>
<ul>
<li><strong>GNU/Linux</strong>. </li>
<li><strong>Solaris</strong>.</li>
<li>Las diferentes variantes <strong>BSD</strong> entre las que podemos encontrar el <strong>Mac OS X Server</strong> de Apple.</li>
</ul>
<p>Como se ha comentado <strong>Samba</strong> es una implementación de <strong>servicios y protocolos</strong>, entre los que destacan: </p>
<ul>
<li><a href="https://es.wikipedia.org/wiki/NetBIOS">NetBIOS</a> sobre TCP/IP (NetBT). </li>
<li><a href="https://es.wikipedia.org/wiki/Server_Message_Block">SMB (Server Message Block)</a>.</li>
<li><a href="https://en.wikipedia.org/wiki/Microsoft_RPC">DCE/RPC</a> o más concretamente, <strong>MSRPC</strong>. </li>
<li>El servidor <a href="https://es.wikipedia.org/wiki/Windows_Internet_Naming_Service">WINS</a> también conocido como el servidor de nombres de <strong>NetBIOS</strong>. </li>
<li>La suite de <strong>protocolos del dominio NT</strong> o <a href="https://es.wikipedia.org/wiki/NTLM">NTLM</a>, para autentificación. </li>
<li>La base de datos del gestor de cuentas seguras <a href="https://learn.microsoft.com/es-es/windows/security/threat-protection/auditing/audit-sam">SAM</a>. </li>
<li>El servicio <a href="https://es.wikipedia.org/wiki/Servicio_de_Subsistema_de_Autoridad_de_Seguridad_Local">Local Security Authority LSA</a> o autoridad de seguridad local.</li>
<li>Recientemente el Logon de entrada de Active Directory, que incluye una versión modificada de <a href="https://es.wikipedia.org/wiki/Kerberos#:~:text=Kerberos%20pronunciación%20en%20inglés%3A%20%2F,identidad%20mutuamente%20de%20manera%20segura.">Kerberos</a> </li>
<li>Y una versión modificada de <a href="https://es.wikipedia.org/wiki/Protocolo_ligero_de_acceso_a_directorios#:~:text=El%20protocolo%20ligero%20de%20acceso,en%20un%20entorno%20de%20red.">LDAP</a>. </li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Todos estos servicios y protocolos son frecuentemente referidos de un modo incorrecto como <strong>NetBIOS</strong> o <strong>SMB</strong>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Propina</p>
<p>A partir de la <strong>versión 4.10.0 de samba</strong> se ofrece soporte completo para <strong>Python 3</strong> y aunque mantiene compatibilidad con <strong>Python 2</strong>, esta debe ser configurada de manera explícita,​ sin embargo, a futuro, dicho soporte a <strong>Python 2</strong> será retirado.</p>
</div>
<h2 id="introduccion-a-la-configuracion-del-servicio-samba-en-ubuntu">Introducción a la configuración del servicio SAMBA en Ubuntu<a class="headerlink" href="#introduccion-a-la-configuracion-del-servicio-samba-en-ubuntu" title="Permanent link">&para;</a></h2>
<p>Toda la configuración de <em>Samba</em> se encuentra en el fichero <code>/etc/samba/smb.conf</code> &#8594; <a href="http://manpages.ubuntu.com/manpages/bionic/man5/smb.conf.5.html">DOCUMENTACIÓN OFICIAL</a> .</p>
<div class="admonition note">
<p class="admonition-title"><strong>NOTA</strong></p>
<p>Existen multitud de opciones pero tan solo se analizarán las imprescindibles para la compartición de recursos. Las líneas que comiencen con <code>#</code> o <code>;</code> están comentadas y el servicio no las tendrá en cuenta. </p>
</div>
<p><strong>Este fichero tiene varios apartados, con opciones que se comentarán a continuación:</strong></p>
<ul>
<li><code>[global]</code> cuyas opciones generales son:</li>
</ul>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>workgroup</strong></td>
<td>Esta variable ha de almacenar el nombre del grupo de trabajo o dominio que usamos en nuestra red.</td>
</tr>
<tr>
<td><strong>server string</strong></td>
<td>Permite reconocer el equipo dentro del dominio. Por defecto tiene como valor el nombre del servidor.</td>
</tr>
<tr>
<td><strong>hosts allow</strong></td>
<td>Especifica desde qué direcciones IP se podrá acceder al servicio. Si se especifica  192.168. todas las direcciones que empiecen de ese modo tendrán acceso al recurso. Se puede establecer direcciones IP completas.</td>
</tr>
<tr>
<td><strong>hosts deny</strong></td>
<td>Especifica los rangos no permitidos, del mismo modo que <strong>host allow</strong>.</td>
</tr>
<tr>
<td><strong>security,</strong></td>
<td>Especifica el nivel de seguridad con el que se puede acceder.</td>
</tr>
</tbody>
</table>
<ul>
<li><code>[autentication]</code>, donde se destaca <strong>server role</strong>, el cual indica la forma en la que va a trabajar el servidor <strong>Samba</strong>:</li>
</ul>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>standalone server</strong></td>
<td>Modo por defecto, actúa como un servidor de ficheros y directorios compartidos pero no como servidor de dominio.</td>
</tr>
<tr>
<td><strong>member server</strong></td>
<td>similar al anterior con la diferencia que añadimos al equipo a un dominio ya existente y por tanto su funcionamiento se verá afectado por las reglas de éste. Esta opción requiere añadir las líneas <strong>security=ADM</strong>, para indicar que el control de acceso lo gestionará el  controlador de dominio, y <strong>realm =NOMBREDOMINIO.COM</strong> para indicar el nombre de dominio al que pertenece el servidor. Además, hay que comentar la línea <strong>workgroup</strong> ya que no pertenecemos a un grupo de trabajo.</td>
</tr>
<tr>
<td><strong>AD domain controler</strong></td>
<td>actúa como un controlador de dominio.</td>
</tr>
</tbody>
</table>
<h3 id="creacion-directorio-compartido">Creación Directorio Compartido<a class="headerlink" href="#creacion-directorio-compartido" title="Permanent link">&para;</a></h3>
<ul>
<li>Para crear un directorio compartido es necesario añadir una nueva sección del siguiente modo:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p p-Indicator">[</span><span class="nv">compartidoUser1</span><span class="p p-Indicator">]</span>
<span class="linenos" data-linenos="2 "></span><span class="l l-Scalar l-Scalar-Plain">comment = Carpeta compartida</span><span class="w"> </span>
<span class="linenos" data-linenos="3 "></span><span class="l l-Scalar l-Scalar-Plain">path = /media/compartido/user1</span>
<span class="linenos" data-linenos="4 "></span><span class="l l-Scalar l-Scalar-Plain">guest ok = Yes</span>
<span class="linenos" data-linenos="5 "></span><span class="l l-Scalar l-Scalar-Plain">read only = Yes</span>
<span class="linenos" data-linenos="6 "></span><span class="l l-Scalar l-Scalar-Plain">write list = @Ceos, administrador, user1</span><span class="w"> </span>
<span class="linenos" data-linenos="7 "></span><span class="l l-Scalar l-Scalar-Plain">directory mask = 0755</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title"><strong>NOTA</strong></p>
<ul>
<li>Estas  líneas  crean  un  recurso  compartido  con  el  nombre <strong>compartidoUser1</strong>  en  el  directorio <strong>/media/compartido/user1</strong> de solo lectura, con acceso de invitado, los usuarios <strong>administrador</strong> y <strong>user1</strong> pueden escribir  y el grupo <strong>@Ceos</strong> también. </li>
<li>Además, se aplicará una máscara de permisos automática de <strong>0755</strong> a los ficheros y carpetas que se creen en este recurso.</li>
</ul>
</div>
<ul>
<li>Las opciones más relevantes son:</li>
</ul>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>[X]:</strong></td>
<td>Nombre del recurso a compartir, normalmente un directorio.</td>
</tr>
<tr>
<td><strong>Comment:</strong></td>
<td>Comentario que describe el directorio que se está compartiendo.</td>
</tr>
<tr>
<td><strong>Path:</strong></td>
<td>Es la carpeta que se quiere compartir. Puede ser cualquier carpeta del servidor, no obstante, por estándar las carpetas compartidas de un servidor suelen encontrarse dentro del directorio /srv.</td>
</tr>
<tr>
<td><strong>guest ok</strong></td>
<td>Permite el acceso como usuario invitado. Su valor puede ser <strong>Yes</strong> o <strong>No</strong>.</td>
</tr>
<tr>
<td><strong>public</strong></td>
<td>Equivalente del parámetro <strong>guest ok</strong>.</td>
</tr>
<tr>
<td><strong>browseable</strong></td>
<td>Permitirá mostrar este recurso en las listas de recursos compartidos. Su valor puede ser <strong>Yes</strong> o <strong>No</strong>.</td>
</tr>
<tr>
<td><strong>writable</strong></td>
<td>Permitirá la escritura. Su valor puede ser <strong>Yes</strong> o <strong>No</strong>.</td>
</tr>
<tr>
<td><strong>valid users</strong></td>
<td>Especifica qué usuarios o grupos pueden acceder al recurso compartido. Mirar valores en la Nota a continuación de esta tabla.</td>
</tr>
<tr>
<td><strong>write list</strong></td>
<td>Usuarios o grupos pueden acceder con permiso de escritura.</td>
</tr>
<tr>
<td><strong>admin users</strong></td>
<td>Usuarios o grupos pueden acceder con permisos administrativos.</td>
</tr>
<tr>
<td><strong>Create Mask:</strong></td>
<td>Indica los permisos de los <strong>ficheros creados por los clientes</strong>. Por defecto 0744 (todos los permisos para usuario propietario y solo permiso de lectura para grupo y otros usuarios).</td>
</tr>
<tr>
<td><strong>directory mask</strong></td>
<td>Define que permisos en el sistema tendrán los subdirectorios creados dentro del recurso.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title"><strong>Especificación de los valores de <code>valid users</code></strong></p>
<ul>
<li><strong>nombres de usuarios</strong> separados por comas</li>
<li><strong>nombres de grupo</strong> precedidos por una <em>@</em></li>
<li><strong>%S</strong> indica que solo el usuario cuyo nombre sea igual al de ese directorio, tiene acceso (útil para las carpetas personales de usuario)</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title"><strong>Advertencia</strong></p>
<p>Una vez añadido el recurso, es necesario reiniciar el servicio para que se apliquen los cambios</p>
</div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>systemctl<span class="w"> </span>restart<span class="w"> </span>smbd
</code></pre></div>
<ul>
<li>Por último, <strong>para acceder al recurso desde el cliente se realizará</strong> a través de cualquier navegador o explorador de archivos de archivos usando el protocolo <strong>smb</strong> especificando el usuario, la dirección del recurso y su nombre del siguiente modo:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>smb://usuario1@servidorubuntu/compartido1
</code></pre></div>
<h2 id="integracion-de-permisos">Integración de permisos<a class="headerlink" href="#integracion-de-permisos" title="Permanent link">&para;</a></h2>
<p>La gestión de permisos de usuarios y grupos es sustancialmente diferente en Sistemas Unix y en Sistemas Microsoft Windows. A continuación se describen las diferencias.</p>
<h3 id="permisos-unix">Permisos Unix<a class="headerlink" href="#permisos-unix" title="Permanent link">&para;</a></h3>
<ul>
<li>En los <strong><em>Sistemas Unix</em></strong>, la gestión de los permisos que los usuarios y los grupos de usuarios tienen sobre los archivos se realiza mediante un sencillo esquema de <strong>tres tipos de permisos (lectura, escritura y ejecución)</strong> aplicables a tres tipos de usuarios <strong>(propietario, grupo propietario y resto)</strong>, los cuales se denominan trios de permisos. </li>
</ul>
<p>En la siguiente figura se puede observar su funcionamiento:</p>
<figure>
  <img src="./imagenes/004B.png" width="650"/>
</figure>

<div class="admonition tip">
<p class="admonition-title">Ventajas</p>
<ul>
<li>Este sencillo esquema se desarrolló en los <strong>años 70</strong> y <strong>aún hoy resulta adecuado</strong> para la gran mayoría de los sistemas en red que podamos encontrar en cualquier tipo de organización, desde pequeñas redes a las más grandes.</li>
<li>Es cierto que tiene algunas limitaciones pero la ventaja de ser sencillo hace que su <strong>administración sea fácil y su rendimiento muy elevado.</strong></li>
</ul>
</div>
<h3 id="permisos-windows">Permisos Windows<a class="headerlink" href="#permisos-windows" title="Permanent link">&para;</a></h3>
<ul>
<li>En los <strong><em>Sistemas Microsoft Windows</em></strong>, la gestión de los permisos que los usuarios y los grupos de usuarios tienen sobre los archivos, se realiza mediante un complejo esquema de listas de control de acceso <strong>ACLs (Access Control Lists)</strong> para cada carpeta y cada archivo. </li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Ventajas</p>
<ul>
<li>El sistema de ACLs tiene la <strong>ventaja de ser mucho más flexible que el sistema Unix ya que se pueden establecer más tipos de permisos</strong>, establecer permisos solo a algunos usuarios y algunos grupos, denegar permisos, etc..., pero como hemos comentado anteriormente, <strong>en la mayoría de los casos, con las prestaciones del Sistema Unix es suficiente</strong>.</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Desventajas</p>
<p>En el lado contrario, el sistema de <strong>ACLs es más complejo de administrar</strong> y más lento ya que antes de acceder a las carpetas o archivos, el sistema debe comprobar listas mientras que en <strong>Unix</strong> hace una operación lógica de los bits que especifican los permisos lo cual <strong>es muchísimo más rápido</strong>.</p>
</div>
<ul>
<li>En particular el acceso a una carpeta se determina por dos tipos de permisos:</li>
</ul>
<div class="admonition info">
<p class="admonition-title"><strong>Tipos de permisos para Samba</strong></p>
<ul>
<li>De <strong>recurso compartido</strong> definidos tan solo a <strong>carpetas</strong>.</li>
<li>De red o <strong>NTFS (New Technology File System)</strong> definidos tanto en <strong>carpetas</strong> como en <strong>archivos</strong>.</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Los permisos de <strong>recurso compartido</strong> suelen utilizarse para administrar equipos con sistemas de archivos <strong>FAT32</strong> (<em>File Allocation Table</em>) o posterior, <strong>por lo que quedan desterrados en sistemas operativos de red</strong> y por tanto se usan los permisos de red <strong>NTFS</strong>. </p>
</div>
<h3 id="permisos-samba">Permisos Samba<a class="headerlink" href="#permisos-samba" title="Permanent link">&para;</a></h3>
<p><strong>Samba</strong> tiene también implementado el sistema de <strong>ACLs</strong> y se gestiona utilizando el comando <code>smbcacls</code>, no obstante, <strong>la recomendación es utilizar el sistema de gestión de permisos de Unix</strong>.</p>
<div class="admonition tip">
<p class="admonition-title">consejo</p>
<p>Para realizar una gestión eficaz de usuarios, grupos y permisos, <strong>se recomienda utilizar los permisos de Unix que permiten asignar permisos de lectura, escritura y ejecución</strong> al usuario propietario del archivo, al grupo propietario del archivo y al resto de usuarios del sistema.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">advertencia</p>
<ul>
<li>Puede ocurrir que exista contradicción entre los permisos del sistema Unix y los permisos del recurso compartido en samba, por ejemplo, podemos tener una carpeta compartida llamada almacen-software con permisos Unix de lectura, escritura y ejecución para todos, en cambio si en el archivo de configuración de samba, <strong>dicho recurso tiene el parámetro read only = yes, no será posible realizar cambios ya que está compartido con permiso de 'solo lectura'</strong>. </li>
<li>Cuando los permisos Unix se contradicen con los permisos samba, <strong>el permiso efectivo es el más restrictivo de los dos</strong>.</li>
</ul>
</div>
<h2 id="referencia">Referencia<a class="headerlink" href="#referencia" title="Permanent link">&para;</a></h2>
<div class="admonition info">
<p class="admonition-title">Wikipedia Oficial de Samba</p>
<p>Se recomienda leer la documentación oficial del servicio en <a href="https://wiki.samba.org/index.php/Main_Page">ENLACE WIKI SAMBA</a></p>
</div>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2023-2024 Francisco Javier Hernández Illán - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:<fj.hernandez@edu.gva.es>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48H48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0L0 176z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/fjavier-hernandez-illan" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  




  


<h4>Consentimiento de cookie</h4>
<p>Esta página de apuntes utiliza cookies para reconocer las visitas, medir la efectividad de la documentación y averiguar si encuentras aquello que buscas o cómo has llegado a estos apuntes. Con tu consentimiento, me ayudas a mejorar estos materiales.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Aceptar</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Gestionar cookies</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["header.autohide", "toc.integrate", "navigation.indexes", "navigation.top", "navigation.tracking", "toc.follow"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>